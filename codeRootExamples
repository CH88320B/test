var patientVisitToken = documentRoot[SDocKey.PatientVisit];

if (patientVisitToken is JArray patientVisitArray)
{
    // Es un array, toma el primer elemento si existe
    var firstElement = patientVisitArray.FirstOrDefault();
    if (firstElement != null)
    {
        PatientVisit = firstElement.ToObject<SdocPatientVisit>();
    }
    else
    {
        // Maneja el caso en que el array esté vacío
    }
}
else if (patientVisitToken is JObject patientVisitObject)
{
    // Es un objeto, puedes convertirlo directamente
    PatientVisit = patientVisitObject.ToObject<SdocPatientVisit>();
}
else
{
    // Maneja otros casos según tus requisitos
    // Puede ser nulo, estar ausente o en otro formato inesperado
    // Por ejemplo:
    // PatientVisit = new SdocPatientVisit(); // o
    // throw new InvalidOperationException("Formato inesperado para PatientVisit");
}
