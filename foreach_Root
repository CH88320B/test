foreach  Root




using EH.Shared.SdocAdapter;
using EH.Shared.XpmToSdocConverter.Mapping.Tools;
using Mapster;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Mapster;

namespace EH.Shared.XpmToSdocConverter.Mapping.Configs
{ 
public class SdocMappingConfig {
    public SdocRoot MapXpmtoSdoc(Encounter xpmEncounter)
    {
        var config = new TypeAdapterConfig();

            config.ForType<XpmPatientVisit, PatientVisit>()
                .Map(dest => dest.ComprehensiveLocationIdentifier, src => src.Cal_ComprehensiveLocationIdentifier)
                .Map(dest => dest.PatientClass, src => src.PatientClass)
                .Map(dest => dest.RoomType, src => src.RoomType)
                .Map(dest => dest.BedType, src => src.BedType)
                .Map(dest => dest.PatientFacility, src => src.PatientFacility)
                .Map(dest => dest.LocationStatus, src => src.LocationStatus)
                .Map(dest => dest.AdmissionType, src => src.AdmissionType)
                .Map(dest => dest.PreadmitNumber, src => src.PreadmitNumber)
                .Map(dest => dest.BedType, src => src.BedType)
                .IgnoreNonMapped(true);


            config.ForType<Encounter, SdocRoot>()
                 .Map(dest => dest.PatientVisit, src => src.XpmPatientVisit);

             var sdocRoot = xpmEncounter?.Adapt<SdocRoot>(config);

            return sdocRoot;
    }
   }
}

/****************************************************************************************************/




using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace EH.Shared.SdocAdapter
{
    public class SdocRoot
    {
  

   /* public List<FamilyMember> FamilyMembers { get; set; }
    public FaxDocument FaxDocuments { get; set; }
    public List<Spouse> Spouses { get; set; }
    public Patient Patient { get; set; }
    public MSP MSP { get; set; }*/
    public PatientVisit PatientVisit { get; set; }
        /* public MessageEvent MessageEvent { get; set; }
         public MessageHeader MessageHeader { get; set; }
         public NOA NOAs { get; set; }
         public Guarantor Guarantor { get; set; }
         public Authentication Authentication { get; set; }
         public UBData UBData { get; set; }
         public Alert Alerts { get; set; }
         public List<Insurance> Insurances { get; set; }
         public List<NextOfKin> NextOfKins { get; set; }
         public List<Order> Orders { get; set; }
         public Order Order { get; set; }
         public List<OrderManager> OrderManagers { get; set; }*/

   }























******************************************************************************/

using EH.Shared.SdocAdapter;
using Microsoft.VisualBasic;
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace EH.Shared.SdocAdapter


{
    public class XpmRoot
    {
        public Encounter[] Encounter { get; set; }
   
    }

    public class Encounter
    {
        public string EncounterID { get; set; }
        public Metadata Metadata { get; set; }

        [JsonProperty("PatientVisit")]
        public XpmPatientVisit XpmPatientVisit { get; set; }
    
    }

    public class Metadata
    {
        public EPin EPin { get; set; }
    }

    public class EPin
    {
        public string EncounterId { get; set; }
    }


    public class XpmPatientVisit
    {
        public string? PatientClass { get; set; }

        public string? AssignedLocation { get; set; }

        public string? RoomType { get; set; }

        public string? BedType { get; set; }

        public string? PatientFacility { get; set; }

        public string? LocationStatus { get; set; }

        public string? Cal_ComprehensiveLocationIdentifier { get; set; }

        public string? AdmissionType { get; set; }

        public string? PreadmitNumber { get; set; }
