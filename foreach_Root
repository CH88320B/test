foreach  Root

{                                                                                          
      "SDoc_Root": { 
	  "PatientVisit": {
	            "PatientEncounterID": null,
                "PatientClass": "O",
                "AssignedLocation": "UPW",
                "RoomType": null,
                "BedType": null,
                "PatientFacility": "",
                "LocationStatus": null,
                "ComprehensiveLocationIdentifier": null,
                "AdmissionType": "EL",
                "PreadmitNumber": null,
				"PatientAdmittingDoc": null,
            "PatientAdmittingDocAddress1": null,
            "PatientAdmittingDocAddress2": null,
            "PatientAdmittingDocCity": null,
            "PatientAdmittingDocDegree": "",
            "PatientAdmittingDocFamilyName": "GAIMAN",
            "PatientAdmittingDocFaxNumber": null,
            "PatientAdmittingDocGivenName": "NEILWAYNE",
            "PatientAdmittingDocMiddleName": "MIDDLE",
            "PatientAdmittingDocNPI": "",
            "PatientAdmittingDocPhoneNumber": null,
            "PatientAdmittingDocPhysicianID": "",
            "PatientAdmittingDocSpecialty": null,
            "PatientAdmittingDocState": null,
            "PatientAdmittingDocTaxonomyCode": null,
            "PatientAdmittingDocZip": null,
            "PatientAttendingDoc": null,
            "PatientAttendingDocAddress1": null,
            "PatientAttendingDocAddress2": null,
            "PatientAttendingDocCity": null,
            "PatientAttendingDocDegree": "",
            "PatientAttendingDocFamilyName": "MCNKMCIP,NAME",
            "PatientAttendingDocFaxNumber": null,
            "PatientAttendingDocGivenName": "KATIE",
            "PatientAttendingDocMiddleName": "MIDDLE",
            "PatientAttendingDocNPI": "",
            "PatientAttendingDocPhoneNumber": null,
            "PatientAttendingDocPhysicianID": "MCNKMCIP,NAME",
            "PatientAttendingDocSpecialty": null,
            "PatientAttendingDocState": null,
            "PatientAttendingDocTaxonomyCode": null,
            "PatientAttendingDocZip": null,
            "PatientClass": "O",
            "PatientConsultingDocDegree": null,
            "PatientConsultingDocFamilyName": null,
            "PatientConsultingDocGivenName": null,
            "PatientConsultingDocIDNumber": null,
            "PatientConsultingDocMiddleName": null,
            "PatientEmploymentStatus": null,
            "PatientEncounterID": null,
            "PatientEntry_ServiceEndDate": "12:00:00AM",
            "PatientEntry_ServiceStartDate": "12:00:00AM",
            "PatientFacility": "",
            "PatientMemberID": null,
            "PatientModule": null,
            "PatientReferringDocDegree": null,
            "PatientReferringDocFamilyName": null,
            "PatientReferringDocGivenName": null,
            "PatientReferringDocIDNumber": null,
            "PatientReferringDocMiddleName": null,
            "PatientSchedulingID": null,
            "PatientServiceCenter": null,
            "PatientStatus": "REG",
            "PatientStatusCode": null,
            "PatientType": "IPACU",
            "PatientValuablesLocation": null,
            "PaymentReceived": 0,
            "PETouchlessTypeIndicator": null,
            "Physicians": null,
		    }
	}	}		
		
/*****************************************************************************************************************************/
{                                                                                          
     "Encounter": [
        {
            "EncounterID": null,
            "Metadata": {
                "EPin": {
                    "EncounterId": ""
                }
            },
            "PatientVisit": {
                "PatientClass": "O",
                "AssignedLocation": "UPW",
                "RoomType": null,
                "BedType": null,
                "PatientFacility": "",
                "LocationStatus": null,
                "Cal_ComprehensiveLocationIdentifier": null,
                "AdmissionType": "EL",
                "PreadmitNumber": null,
				 "Physician": [
                    {
                        "DocPhysicianID": "MCNKMCIP,NAME",
                        "DocFamilyName": "MCNKMCIP,NAME",
                        "DocGivenName": "KATIE",
                        "DocMiddleName": "MIDDLE",
                        "DocNameSuffix": null,
                        "DocPrefix": null,
                        "DocDegree": "",
                        "DocSourceTable": "",
                        "DocAssigningAuthority": "",
                        "DocNameTypeCode": "",
                        "DocIdentifierCheckDigit": "",
                        "DocCheckDigitScheme": "",
                        "DocIdentifierTypeCode": "",
                        "DocAssigningFacility": "",
                        "DocNPI": "",
                        "DocNameRepresentationCode": "",
                        "DocNameContext": "",
                        "DocNameValidityRange": "",
                        "DocNameAssemblyOrder": "",
                        "DocEffectiveDate": "",
                        "DocExpirationDate": "",
                        "DocProfessionalSuffix": null,
                        "DocNameRepresentationCodeAssigningAgencyOrDepartment": null,
                        "DocAddress1": null,
                        "DocAddress2": null,
                        "DocCity": null,
                        "DocState": null,
                        "DocZip": null,
                        "DocTaxonomyCode": null,
                        "DocSpecialty": null,
                        "DocFaxNumber": null,
                        "DocPhoneNumber": null,
                        "DocOrdinality": "0",
                        "DocPhysicianTypeDescription": "",
                        "DocOrder": "0",
                        "PhysicianType": "Attending",
                        "ProviderCode": null
                    },
                    {
                        "DocPhysicianID": "",
                        "DocFamilyName": "GAIMAN",
                        "DocGivenName": "NEILWAYNE",
                        "DocMiddleName": "MIDDLE",
                        "DocNameSuffix": null,
                        "DocPrefix": null,
                        "DocDegree": "",
                        "DocSourceTable": "",
                        "DocAssigningAuthority": "",
                        "DocNameTypeCode": "",
                        "DocIdentifierCheckDigit": "",
                        "DocCheckDigitScheme": "",
                        "DocIdentifierTypeCode": "",
                        "DocAssigningFacility": "",
                        "DocNPI": "",
                        "DocNameRepresentationCode": "",
                        "DocNameContext": "",
                        "DocNameValidityRange": "",
                        "DocNameAssemblyOrder": "",
                        "DocEffectiveDate": "",
                        "DocExpirationDate": "",
                        "DocProfessionalSuffix": null,
                        "DocNameRepresentationCodeAssigningAgencyOrDepartment": null,
                        "DocAddress1": null,
                        "DocAddress2": null,
                        "DocCity": null,
                        "DocState": null,
                        "DocZip": null,
                        "DocTaxonomyCode": null,
                        "DocSpecialty": null,
                        "DocFaxNumber": null,
                        "DocPhoneNumber": null,
                        "DocOrdinality": "0",
                        "DocPhysicianTypeDescription": "",
                        "DocOrder": "0",
                        "PhysicianType": "Admitting",
                        "ProviderCode": null
                    }
                   
                ]
				
		    }
	     }	
	  ]	 
}		




	


using EH.Shared.SdocAdapter;
using EH.Shared.XpmToSdocConverter.Mapping.Tools;
using Mapster;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Mapster;

namespace EH.Shared.XpmToSdocConverter.Mapping.Configs
{ 
public class SdocMappingConfig {
    public SdocRoot MapXpmtoSdoc(Encounter xpmEncounter)
    {
        var config = new TypeAdapterConfig();

            config.ForType<XpmPatientVisit, PatientVisit>()
                .Map(dest => dest.ComprehensiveLocationIdentifier, src => src.Cal_ComprehensiveLocationIdentifier)
                .Map(dest => dest.PatientClass, src => src.PatientClass)
                .Map(dest => dest.RoomType, src => src.RoomType)
                .Map(dest => dest.BedType, src => src.BedType)
                .Map(dest => dest.PatientFacility, src => src.PatientFacility)
                .Map(dest => dest.LocationStatus, src => src.LocationStatus)
                .Map(dest => dest.AdmissionType, src => src.AdmissionType)
                .Map(dest => dest.PreadmitNumber, src => src.PreadmitNumber)
                .Map(dest => dest.BedType, src => src.BedType)
                .IgnoreNonMapped(true);


            config.ForType<Encounter, SdocRoot>()
                 .Map(dest => dest.PatientVisit, src => src.XpmPatientVisit);

             var sdocRoot = xpmEncounter?.Adapt<SdocRoot>(config);

            return sdocRoot;
    }
   }
}

/****************************************************************************************************/




using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace EH.Shared.SdocAdapter
{
    public class SdocRoot
    {
  

   /* public List<FamilyMember> FamilyMembers { get; set; }
    public FaxDocument FaxDocuments { get; set; }
    public List<Spouse> Spouses { get; set; }
    public Patient Patient { get; set; }
    public MSP MSP { get; set; }*/
    public PatientVisit PatientVisit { get; set; }
        /* public MessageEvent MessageEvent { get; set; }
         public MessageHeader MessageHeader { get; set; }
         public NOA NOAs { get; set; }
         public Guarantor Guarantor { get; set; }
         public Authentication Authentication { get; set; }
         public UBData UBData { get; set; }
         public Alert Alerts { get; set; }
         public List<Insurance> Insurances { get; set; }
         public List<NextOfKin> NextOfKins { get; set; }
         public List<Order> Orders { get; set; }
         public Order Order { get; set; }
         public List<OrderManager> OrderManagers { get; set; }*/

   }























******************************************************************************/

using EH.Shared.SdocAdapter;
using Microsoft.VisualBasic;
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace EH.Shared.SdocAdapter


{
    public class XpmRoot
    {
        public Encounter[] Encounter { get; set; }
   
    }

    public class Encounter
    {
        public string EncounterID { get; set; }
        public Metadata Metadata { get; set; }

        [JsonProperty("PatientVisit")]
        public XpmPatientVisit XpmPatientVisit { get; set; }
    
    }

    public class Metadata
    {
        public EPin EPin { get; set; }
    }

    public class EPin
    {
        public string EncounterId { get; set; }
    }


    public class XpmPatientVisit
    {
        public string? PatientClass { get; set; }

        public string? AssignedLocation { get; set; }

        public string? RoomType { get; set; }

        public string? BedType { get; set; }

        public string? PatientFacility { get; set; }

        public string? LocationStatus { get; set; }

        public string? Cal_ComprehensiveLocationIdentifier { get; set; }

        public string? AdmissionType { get; set; }

        public string? PreadmitNumber { get; set; }
