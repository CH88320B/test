 public static List<Models.Xpm.Insurance> MapInsurances(Root root)
 {
     var insurances = new List<Models.Xpm.Insurance>();

     if (root.Insurances.Count <= 0) return insurances;

     foreach (var ins in root.Insurances)
     {
         var insurance = new Models.Xpm.Insurance
         {
             Subscriber = new Models.Xpm.Subscriber
             {
                 Address1 = ins.Subscriber?.Address1,
                 Address2 = ins.Subscriber?.Address2,
                 City = ins.Subscriber?.City,
                 ClientRelationshipToPatient = ins.Subscriber?.ClientRelationshipToPatient,
                 DateOfBirth = ins.Subscriber?.DateOfBirth.ToString(CultureInfo.InvariantCulture),
                 EmployeeId = ins.Subscriber?.EmployeeID,
                 EmployerName = ins.Subscriber?.EmployerName,
                 EmploymentStatus = ins.Subscriber?.EmploymentStatus,
                 FirstName = ins.Subscriber?.FirstName,
                 InsuredsPhoneNumberHome = ins.Subscriber?.SubscriberHomePhone,
                 InsuredsEmployerPhoneNumber = ins.Subscriber?.SubscriberWorkPhone,
                 GroupEmployerId = ins.Subscriber?.InsuredsGroupEmpID,
                 GroupEmpName = ins.Subscriber?.InsuredsGroupEmpName,
                 GuarantorsRelationshipToInsured = ins.Subscriber?.GuarantorsRelationshipToInsured,
                 HicNumber = ins.Subscriber?.HICNumber,
                 InsuredIdNumber = ins.Subscriber?.InsuredIDNumber,
                 LastName = ins.Subscriber?.LastName,
                 MedicareHealthInsCardNumber = ins.Subscriber?.MedicaidID,
                 MiddleName = ins.Subscriber?.MiddleName,
                 NameSuffix = ins.Subscriber?.NameSuffix,
                 OrganizationName = ins.Subscriber?.InsuredsGroupEmpOrganizationName,
                 OriginalRelationshipToPatientCode = ins.Subscriber?.OriginalRelationshipToPatientCode,
                 Sex = ins.Subscriber?.Sex,
                 Ssn = ins.Subscriber?.SSN,
                 State = ins.Subscriber?.State,
                 SubscriberId = ins.Subscriber?.SubscriberID,
                 Zip = ins.Subscriber?.Zip,

             },
             AccidentDate = ins?.AccidentDate.ToString(CultureInfo.InvariantCulture),
             AssignmentOfBenefits = ins?.AssignmentOfBenefits,
             BadPlanCodeIncorrectPlanCode = ins?.BadPlanCodeIncorrectPlanCode,
             BadPlanCodeMessage = ins?.BadPlanCodeMessage,
             BadPlanCodeRecommendedPlanCode = ins?.BadPlanCodeRecommendedPlanCode,
             BillingStatus = ins?.BillingStatus,
             Branch = ins?.Branch,
             BypassPayerCodeMapping = ins?.BypassPayerCodeMapping.ToString(CultureInfo.InvariantCulture),
             CardControlNumber = ins?.CardControlNumber,
             CardNumber = ins?.CardNumber,
             CDProcId = ins?.CDProcID.ToString(CultureInfo.InvariantCulture),
             CDReqId = ins?.CDReqID.ToString(CultureInfo.InvariantCulture),
             CertificationBeginDate = ins?.CertificationBeginDate.ToString(CultureInfo.InvariantCulture),
             CertificationEndDate = ins?.CertificationEndDate.ToString(CultureInfo.InvariantCulture),
             CertificationNumber = ins?.InsurancePrimaryAuthorization,
             ChainedBatchRecordId = ins?.ChainedBatchRecordID,
             ClientPayerMnemonic = ins?.ClientPayerMnemonic,
             CompanyPlanCode = ins?.CompanyPlanCode,
             CoordinationOfBenefits = ins?.CoordinationOfBenefits,
             CoordOfBenPriority = ins?.CoordOfBenPriority,
             DateRun = ins?.DateRun.ToString(CultureInfo.InvariantCulture),
             DisplayWorkcenter = ins?.DisplayWorkcenter,
             DLPVId = ins?.DLPVID.ToString(CultureInfo.InvariantCulture),
             DSId = ins?.DSID.ToString(CultureInfo.InvariantCulture),
             EffectiveDate = ins?.EffectiveDate.ToString(CultureInfo.InvariantCulture),
             FacilityNetworkIdentificationNumber = ins?.FacilityNetworkIdentificationNumber,
             GenericResponseTypeDescription = ins?.GenericResponseTypeDescription,
             GenericResponseTypeId = ins?.GenericResponseTypeID,
             GHPCoverageStatus = root?.MSP.ESRDs.GHPCoverageStatus,
             GHPInsuranceAddressAddressLine1 = ins?.InsuranceCompanyAddress_StreetAddress,
             GHPInsuranceAddressAddressLine2 = ins?.InsuranceCompanyAddress_OtherDesignation,
             GHPInsuranceAddressCity = ins?.InsuranceCompanyAddress_City,
             GHPInsuranceAddressState = ins?.InsuranceCompanyAddress_State,
             GHPInsuranceGroupNumber = root.MSP?.ESRDs?.GHPInsuranceGroupNumber,
             GHPInsuranceName = root.MSP?.ESRDs?.GHPInsuranceName,
             GHPInsurancePhoneNumber = root.MSP?.ESRDs?.GHPInsurancePhoneNumber,
             GHPInsurancePolicyHolderNameFirstName = root.MSP?.ESRDs?.GHPInsurancePolicyHolderName_FirstName,
             GHPInsurancePolicyHolderNameLastName = root.MSP?.ESRDs?.GHPInsurancePolicyHolderName_LastName,
             GHPInsurancePolicyHolderNameMiddleInitial = root.MSP?.ESRDs?.GHPInsurancePolicyHolderName_MiddleInitial,
             GHPInsurancePolicyHolderNamePrefix = root.MSP?.ESRDs?.GHPInsurancePolicyHolderName_Prefix,
             GHPInsurancePolicyHolderNameSuffix = root.MSP?.ESRDs?.GHPInsurancePolicyHolderName_Suffix,
             GHPInsurancePolicyNumber = root.MSP?.ESRDs?.GHPInsurancePolicyNumber,
             GHPInsuredRelationshipRelationshipCode = root.MSP?.ESRDs?.GHPInsuredRelationship_RelationshipCode,
             GHPInsuredRelationshipRelationshipDescription = root.MSP?.ESRDs?.GHPInsuredRelationship_RelationshipDescription,
             GroupName = ins?.GroupName,
             GroupNumber = ins?.GroupNumber,
             HospitalEffectiveDate = ins?.HospitalEffectiveDate.ToString(CultureInfo.InvariantCulture),
             In1SetId = ins?.InsuranceID.ToString(CultureInfo.InvariantCulture),
             InsCompanyCity = ins?.City,
             InsCompanyOtherDesignation = ins?.Address2,
             InsCompanyPhoneNumber = ins?.InsuranceCoPhoneNumber,
             InsCompanyState = ins?.State,
             InsCompanyStreetAddress = ins?.Address1,
             InsCompanyZip = ins?.Zip,
             InsCompanyZipExtension = ins?.InsuranceCompanyAddress_Zip,
             InsEmployerGroupHealthInsurance = root.MSP?.EmployerGroupHealthInsurancePatient,
             InsLargeGroupHealthInsurance = root.MSP?.LargeGroupHealthInsurancePatient,
             InsuranceAuthorizationInformation = ins?.InsuranceAuthorizationInformation,
             InsuranceOrdinality = ins?.Ordinality.ToString(CultureInfo.InvariantCulture),
             InsuranceType = ins?.InsuranceType,
             IsDupe = ins.IsDupe,
             IsPrimary = ins.IsPrimary,
             IsTermed = ins.IsTermed,
             MajorMedicalFlag = ins?.MajorMedicalFlag,
             MajorMedicalPresentLoc = ins?.MajorMedicalPresentLoc,
             MasterPolicyNumber = ins?.MasterPolicyNumber,
             MedicalAssistanceBenefitPackage = ins?.MedicalAssistanceBenefitPackage,
             MedicalAssistanceProgramStatus = ins?.MedicalAssistanceProgramStatus,
             MedicalAssistanceResourceCode = ins?.MedicalAssistanceResourceCode,
             MedicalInsurance = root.MSP?.MedicalInsurance,
             MedicareEligibilityDisability = root.MSP?.MedicareEligibilityDisability,
             MedicareEligibilityDisabilityDate = root.MSP?.MedicareEligibilityDisabilityDate,
             MedicareLifetimeSignatureAuthDate = ins?.MedicareLifetimeSignatureAuthDate.ToString(CultureInfo.InvariantCulture),
             MedicareLifetimeSignatureAuthLocation = ins?.MedicareLifetimeSignatureAuthLocation,
             NoticeOfAdmissionDate = ins?.NOAAdmissionDate.ToString(CultureInfo.InvariantCulture),
             OverrideInsuranceAddress = ins?.OverrideInsuranceAddress,
             OverrideInsuranceCity = ins?.OverrideInsuranceCity,
             OverrideInsuranceName = ins?.OverrideInsuranceName,
             OverrideInsuranceState = ins?.OverrideInsuranceState,
             OverrideInsuranceZip = ins?.OverrideInsuranceZip,
             PassportPayerDescription = ins?.PassportPayerDescription,
             PassportPayerMnemonic = ins?.PassportPayerMnemonic,
             PassportPayerMnemonicOverride = ins?.PassportPayerMnemonicOverride,
             PatientMemberNumber = ins?.PatientMemberNumber_IDNumber,
             PayerCost = ins?.PayerCost.ToString(CultureInfo.InvariantCulture),
             PayerId = ins?.ClientCompanyID,
             PayerName = ins?.ClientPayerDescription,
             PlanId = ins?.ClientPlanID,
             PlanIdentifier = ins?.PlanIdentifier,
             PlanNumber = ins?.PlanNumber,
             PlanType = ins?.InsurancePlanType,
             PoqFinal = ins?.POQFinal.ToString(CultureInfo.InvariantCulture),
             PPOIndicator = ins?.PPOIndicator,
             PreAdmitCertPac = ins?.PreAdmitCertPAC,
             ProfeeAddress = ins?.ProfeeAddress,
             ProfeeCity = ins?.ProfeeCity,
             ProfeeMailTo = ins?.ProfeeMailTo,
             ProfeePhoneNumber = ins?.ProfeePhoneNumber,
             ProfeeState = ins?.ProfeeState,
             ProfeeZip = ins?.ProfeeZip,
             PropertyAndCasualtyClaimNumber = ins?.PropertyAndCasualtyClaimNumber,
             RanByUserId = ins?.RanByUserID.ToString(CultureInfo.InvariantCulture),
             ReAddedInsurance = ins?.ReAddedInsurance.ToString(CultureInfo.InvariantCulture),
             ReleaseInformationCode = ins?.ReleaseInformationCode,
             ReportOfEligibilityFlag = ins?.ReportofEligibilityFlag,
             RequestedServiceType = ins?.RequestedServiceType,
             Response271 = ins?.Response_271,
             ResponseCount = ins?.ResponseCount.ToString(CultureInfo.InvariantCulture),
             ResponseHiDefXml = ins?.Response_HiDefXML,
             ResponseHtml = ins?.Response_HTML,
             ResponseRaw = ins?.Response_Raw,
             ResponseText = ins?.Response_Text,
             RetirementDate = ins?.RetirementDate.ToString(CultureInfo.InvariantCulture),
             RoomRatePrivate = ins?.PrivateRoomRate,
             RoomRateSemiPrivate = ins?.SemiPrivateRoomRate,
             SystemOrder = ins?.SystemOrder.ToString(CultureInfo.InvariantCulture),
             TermDate = ins?.TermDate.ToString(CultureInfo.InvariantCulture),
             TriggeredIns = ins?.TriggeredIns.ToString(CultureInfo.InvariantCulture),
             TXId = ins?.TXID,
             TypeOfAgreementCode = ins?.TypeOfAgreementCode,
             UserAdded = ins?.UserAdded,
             VerificationBy = ins?.VerificationBy,
             VerificationStatus = ins?.VerificationStatus,
             
             NoaRawMessage278 = root.NOAs?.FirstOrDefault()?.RawMessage278,
             NoaPreviousAdminRefNumber = root.NOAs?.FirstOrDefault()?.PreviousAdminRefNumber,
             NoaIcd10DiagCode1 = root.NOAs?.FirstOrDefault().ICD10DiagCode1,
             NoaMessage = root.NOAs?.FirstOrDefault()?.Message,
             NoaResponseType = root.NOAs?.FirstOrDefault()?.ResponseType.ToString(CultureInfo.InvariantCulture),
             NoaReferenceNumber = root.NOAs?.FirstOrDefault()?.NOAReferenceNumber,
             NoaResponseReceived = root.NOAs?.FirstOrDefault()?.ResponseReceived,
             NoaGenericResponseTypeDescription = root.NOAs?.FirstOrDefault()?.GenericResponseTypeDescription,
             NoaTXId = root.NOAs?.FirstOrDefault()?.TXID,
             NoaReviewIdentificationNumber = root.NOAs?.FirstOrDefault()?.ReviewIdentificationNumber,
             NoaCertificationAction = root.NOAs?.FirstOrDefault()?.CertificationAction,
             NoaClientPayerMnemonic = root.NOAs?.FirstOrDefault()?.ClientPayerMnemonic,
             NoaInsuranceIndex = root.NOAs?.FirstOrDefault()?.InsuranceIndex.ToString(CultureInfo.InvariantCulture),
             NoaInsuranceId = root.NOAs?.FirstOrDefault()?.InsuranceID.ToString(CultureInfo.InvariantCulture),

         };

         insurances.Add(insurance);

     }
     return insurances;
